<!DOCTYPE html>
<html>

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-145058192-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-145058192-1');
    </script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">

    <title>Quand est-ce que c'est ?</title>

    <style>
        .presque-plein-millieu {
            position: absolute;
            top: 30%;
            width: 100%;
            text-align: center;
        }
        .lien-source {
            position: absolute;
            bottom: 0;
            width: 100%;
            text-align: center;
        }
        .lien-source a {
            color: lightgrey;
        }
    </style>
    <script>

        function controleur(){
            // RÃ©cuperation du jour selectionnÃ© par l'utilisateur
            var jourSelecteur = document.getElementById("jour-selecteur");
            var indexJourSelectionne = Number(jourSelecteur.options[jourSelecteur.selectedIndex].value);

            console.debug(`Index du jour selectionne : ${indexJourSelectionne}`);

            // Appel au quandestcequecest
            var resultat = calculQuandEstCeQueCEst(indexJourSelectionne);

            // Affichage formatÃ© du resultat
            document.getElementById("reponse-paragraphe").innerHTML = contruirePhraseReponse(resultat);

        }

        function calculQuandEstCeQueCEst(indexJour) {
            var maintenant = new Date
            
            console.debug(`Date du jour : ${maintenant}`);
            
            // Calcul de la date du prochain dimanche
            var prochainDimanche = new Date(
                maintenant.getFullYear(),
                maintenant.getMonth(),
                maintenant.getDate() + (7 - maintenant.getDay()) % 7);
            
            console.debug(`Date du prochain dimanche : ${prochainDimanche}`);

            // Calcul du resultat en partant du prochain dimanche
            var resultat = new Date(prochainDimanche);
            resultat.setDate(resultat.getDate() + indexJour);

            return resultat;
        }

        function contruirePhraseReponse(date) {
            // Affichage formatÃ© de la date
            var options = {
                weekday: "long",
                year: "numeric",
                month: "long",
                day: "numeric"
            };

            return "Il s'agit du " + date.toLocaleDateString('fr-FR', options) + " sans aucun doute possible ! ðŸ˜Œ";

        }
    </script>
</head>


<body>
    <div class="presque-plein-millieu">
        <p><b>Quand est-ce que c'est Â«&nbsp;
            <select id="jour-selecteur" onchange="controleur()">
                <option hidden disabled selected value/>
                <option value="1">lundi</option>
                <option value="2">mardi</option>
                <option value="3">mercredi</option>
                <option value="4">jeudi</option>
                <option value="5">vendredi</option>
                <option value="6">samedi</option>
                <option value="7">dimanche</option>
            </select>
            &nbsp;prochain&nbsp;Â» ?</b></p>
        <p id="reponse-paragraphe" />
    </div>
    <p class="lien-source" >
        <a href="https://github.com/donzellt/quandestcequecest">sources</a>
    </p>
</body>
</html>
